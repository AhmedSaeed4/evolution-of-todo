# ========================================
# Phase V: Microservices Frontend Environment
# ========================================
# This file contains all environment variables for the Phase 5 frontend application
# Copy this file to .env.local and fill in your actual values

# ========================================
# API Configuration (Build-time Variables)
# ========================================
# These variables are BAKED INTO the client-side JavaScript bundle during build
# They CANNOT be changed at runtime - requires rebuilding the frontend image

# Backend API URL (browser â†’ backend via Minikube tunnel)
NEXT_PUBLIC_BACKEND_URL="http://127.0.0.1:8000"

# Frontend auth URL
NEXT_PUBLIC_AUTH_URL="http://127.0.0.1:3000"

# ChatKit domain key
NEXT_PUBLIC_CHATKIT_DOMAIN_KEY="local-dev"

# WebSocket service URL (for real-time updates)
# Connects to websocket-service microservice on port 8001
NEXT_PUBLIC_WEBSOCKET_URL="ws://127.0.0.1:8001"

# SSE endpoint URL (fallback for WebSocket over tunnels)
# More stable than WebSocket over Minikube tunnel
NEXT_PUBLIC_SSE_URL="http://127.0.0.1:8001/api/sse"

# ========================================
# Authentication Configuration
# ========================================
# Better Auth session encryption secret (generate with: openssl rand -base64 32)
BETTER_AUTH_SECRET="your-better-auth-secret-key-here"

# ========================================
# Authentication Bypass
# ========================================
# Set to "true" to disable authentication requirements for local development
# When true: All routes accessible, mock user used, no login required
# When false: Normal authentication flow enforced
NEXT_PUBLIC_AUTH_BYPASS="false"

# ========================================
# Backend URLs (Server-side Only)
# ========================================
# These are used in server-side code only (API routes, getServerSideProps)
# They can be changed at runtime via Helm values or environment variables

# Backend API internal URL (for server-side calls to backend-api)
# Uses Kubernetes DNS when deployed: http://backend:8000
BACKEND_URL_INTERNAL="http://backend:8000"

# Frontend internal URL (for server-side auth callbacks)
AUTH_URL_INTERNAL="http://frontend:3000"

# ========================================
# Dapr Configuration (Server-side Only)
# ========================================
# Dapr sidecar host (for server-side Dapr communication)
DAPR_HOST="localhost"

# Dapr HTTP port (default: 3500)
DAPR_HTTP_PORT="3500"

# ========================================
# Feature Flags (Optional)
# ========================================
# Analytics tracking (disabled by default)
NEXT_PUBLIC_ENABLE_ANALYTICS="false"

# Maintenance mode (disabled by default)
NEXT_PUBLIC_MAINTENANCE_MODE="false"

# ========================================
# Production URLs (Optional)
# ========================================
# Uncomment and configure for production deployment
# NEXT_PUBLIC_API_URL="https://api.yourapp.com"
# NEXT_PUBLIC_AUTH_URL="https://yourapp.com"
# NEXT_PUBLIC_BACKEND_URL="https://api.yourapp.com"
# NEXT_PUBLIC_WEBSOCKET_URL="wss://api.yourapp.com"
# NEXT_PUBLIC_SSE_URL="https://api.yourapp.com/api/sse"
